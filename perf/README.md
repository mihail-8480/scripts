
# Perf Scripts

Simple `perf` wrappers to make profiling slightly easier.

> [!NOTE]
> These scripts are being used by the .NET scripts in this same repository.

## Record

Executes the passed arguments as a command and runs `perf record` on the created process.

> [!IMPORTANT]
> The file that is specified by the `PERF_DATA_FILE` environment variable is deleted and might be recreated when this command runs.

```sh
perf/record <command>
```

### Environment Variables

- `PERF_DATA_FILE` - The file name of the output generated by `perf record` (defaults to `perf.data`).

## Convert

Executes `perf script -F +pid` and saves the output to `$PERF_SCRIPT_OUTPUT`.

> [!IMPORTANT]
> The file that is specified by the `PERF_SCRIPT_OUTPUT` environment variable is deleted and might be recreated when this command runs.

```sh
perf/convert
```

### Environment Variables

- `PERF_SCRIPT_OUTPUT` - The file name of the output generated by `perf script` (defaults to `profile.perf`).

## Enable Kernel Profile

Sets the `kernel.perf_event_paranoid` parameter to `-1`, which makes the kernel send profiling events related to the kernel.

```sh
perf/enable-kernel-profile
```
